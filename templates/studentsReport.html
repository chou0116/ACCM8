{% extends "bootstrap/base.html" %}
{% include 'layout.html' %}

{% block content %}
<div class="container">

    <form id="reportForm" action="{{ url_for('studentsReport.studentsReport') }}" method="post"
          class="needs-validation">

        <div class="py-5 text-center ">
            <h2>Students Reports Page</h2>
            <p class="my-3 text-muted">
                The administrator can use this page to generate student reports
            </p>

            <hr class="mb-4">
        </div>

        <div class="input-group">


            <div class="col-md-2 mb-6">
                <select id="version" name="version" class="custom-select">
                    <option value="0">Choose Version...</option>
                    {% for version in programVersions %}
                    {% if version['program_version'] == values['version'] %}
                    <option value="{{ version['program_version'] }}" selected>{{version['program_version']}}</option>
                    {% else %}
                    <option value="{{ version['program_version'] }}">{{version['program_version']}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                <div class="invalid-feedback">
                    Program Version
                </div>
            </div>
            <div class="col-md-6 mb-6">
                <select id="program" name="program" class="custom-select">
                    <option value="0">Choose Program...</option>
                    {% for program in programs %}
                    {% if program['program_code'] == values['program'] %}
                    <option value="{{ program['program_code'] }}" selected>{{ program['program_name'] }}</option>
                    {% else %}
                    <option value="{{ program['program_code'] }}">{{ program['program_name'] }}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                <div class="invalid-feedback">
                    Program Name
                </div>
            </div>

            <div class="col-md-2 mb-6">
                <select id="level" name="level" class="custom-select">
                    <option value="0">Choose Level...</option>
                    {% for level in levels %}
                    {% if level == values['level'] %}
                    <option value="{{level}}" selected>{{level}}</option>
                    {% else %}
                    <option value="{{level}}">{{level}}</option>
                    {% endif %}
                    {% endfor %}
                </select>

                <div class="invalid-feedback">
                    Program Level
                </div>
            </div>
            <div class="col-md-2 mb-6">
                <button type="submit" class="btn btn-success my-1" id="submitBtn">View Report</button>
            </div>

        </div>
    </form>

    <div class="form-group row col-md-12" id="messageBox" style="height: 100px;">

        <div class="col-md-10"><label id="errorConfirmation" class="form-control alert-danger"
                                      style="display: none; text-align: center;"></label></div>
    </div>

    <!--The table for students who fail and pass here-->
    <div id="StudentReport" class="tabcontent">
        <h3 class="text-center font-weight-bold">Fail</h3>
        <div>
            <p class="text-center">The following students cannot proceed to the next level as they have not met the
                program requirement</p>

            <table class="table">
                <thead class="thead-light">
                <tr>
                    <th scope="col" class="text-center">Student#</th>
                    <th scope="col" class="text-center">Student Name</th>
                    <th scope="col" class="text-center">Student Progress Map</th>
                    <th scope="col" class="text-center">Courses Fail</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td scope="row" class="text-center">040930933</td>
                    <td class="text-center">Maria</td>
                    <td><a href="#" class="badge badge-flowchart" title="Course flowchart" value=""><i
                            class="fas fa-project-diagram"></i></a>
                    </td>
                    <td class="text-center">CST8279-Python</td>
                </tr>

                </tbody>
            </table>
        </div>
        </br>
        </br>
        </br>
        <div>
            <h3 class="text-center font-weight-bold">Pass</h3>
            </br>
            <p class="text-center">The following students have met the program requirement, and proceed to the next
                level</p>
            <table class="table">
                <thead class="thead-light">
                <tr>
                    <th scope="col" class="text-center">Student#</th>
                    <th scope="col" class="text-center">Student Name</th>
                    <th scope="col" class="text-center">Student Progress Map</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td scope="row" class="text-center">04092940</td>
                    <td scope="row" class="text-center">John</td>
                    <td><a href="#" class="badge badge-flowchart" title="Course flowchart" value=""><i
                            class="fas fa-project-diagram"></i></a>
                    </td>
                </tr>

                </tbody>
            </table>
            </br>
            </br>
        </div>

    </div>

    <!--   {% if showMessage %}
       <div class="alert alert-danger">
                   No Student Data is available
       </div>
       {% endif %}
       {% if failedStudentsRecords|length > 0 or passedStudentsRecords|length > 0%}
       <div id="reportTables" >
           {% if failedStudentsRecords|length > 0 %}
           <p>Students who failed</p>
           <table class="table table-striped table-bordered">
               <thead>
                   <tr>
                       <th scope="col">Student Number</th>
                       <th scope="col">Student Name</th>
                       <th scope="col">Progression Map</th>
                   </tr>
               </thead>
               <tbody >
                   {% for student in failedStudentsRecords %}
                   <tr>
                       <td>
                           {{ student['student_num'] }}
                       </td>
                       <td>
                           {{ student['fname'] + " " + student['lname']}}
                       </td>
                       <td>
                           <a href="{{ url_for('viewFlowchart', sid= student['sid'], sVersion=student['program_version'], sProgram=student['pid'], sLevel=student['level'], sCourse='null') }}"
                               class="badge badge-flowchart" title="Course flowchart" value="{{ student['sid'] }}"><i
                                   class="fas fa-project-diagram"></i></a>
                       </td>
                   </tr>
                   {% endfor %}
               </tbody>
           </table>
           {% endif %}
           {% if passedStudentsRecords|length > 0 %}
           <p>Students who passed</p>
           <table class="table table-striped table-bordered">
               <thead>
                   <tr>
                       <th scope="col">Student Number</th>
                       <th scope="col">Student Name</th>
                       <th scope="col">Progression Map</th>
                   </tr>
               </thead>
               <tbody >
                   {% for student in passedStudentsRecords %}
                   <tr>
                       <td>
                           {{ student['student_num'] }}
                       </td>
                       <td>
                           {{ student['fname'] + " " + student['lname']}}
                       </td>
                       <td>
                           <a href="{{ url_for('viewFlowchart', sid= student['sid'], sVersion=student['program_version'], sProgram=student['pid'], sLevel=student['level'], sCourse='null') }}"
                               class="badge badge-flowchart" title="Course flowchart" value="{{ student['sid'] }}"><i
                                   class="fas fa-project-diagram"></i></a>
                       </td>
                   </tr>
                   {% endfor %}
               </tbody>
           </table>
           {% endif %}
       </div>
       {% endif %}-->

</div>
<footer class="footer">
    <div class="container">
        <p class="float-right text-white">Â© Algonquin College 2019-2021</p>
    </div>
</footer>
<style>
/ style for the progress map icon
.fa-project-diagram:before {
    content: "\f542";
}
.badge-flowchart {
    color: #20C997;
    border: 1px solid #20C997;
    background-color: #A2E6D2;
}
.badge {
    display: inline-block;
    padding: .25em .4em;
    font-size: 75%;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: .25rem;
}
.table td, .table th {
    padding: .75rem;
    vertical-align: top;
    border-top: 1px solid #dee2e6;
    text-align: center;
}

.footer {
    bottom: 0;
    width: 100%;
    height: 60px;
    background-color: #006341;
    padding-top: 15px;
}
h3 {
  margin-top: 2rem;
    border: 0;
    border-top: 1px solid rgba(0,0,0,.1);
    padding-top: 50px;
}

</style>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>

<script type="text/javascript" src="/static/studentsReport.js"></script>
{% endblock %}